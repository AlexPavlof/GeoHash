var geohash=function(r){"use strict";for(var b="0123456789bcdefghjkmnpqrstuvwxyz",h={},I="auto",e=0;e<b.length;e+=1)h[b.charAt(e)]=e;var p=[0,5,7,8,11,12,13,15,16,17,18],l=function(r,e){return r/Math.pow(2,e)&1},t=function(r){return 17<=r?8:15<=r&&r<17?7:13<=r&&r<15?6:11<=r&&r<13?5:8<=r&&r<11?4:6<=r&&r<8?3:3<=r&&r<6?2:1},x=function(r,e,t){if(t===I){if("number"==typeof r||"number"==typeof e)throw new Error("string notation required for auto precision.");var n=r.split(".")[1].length,o=e.split(".")[1].length,u=Math.max(n,o);t=p[u]}else void 0===t&&(t=9);e=parseFloat(e),r=parseFloat(r),t=parseInt(t,10);for(var i,d=[],a=0,l=0,g=0,f=90,c=-90,h=180,s=-180;d.length<t;)if(l%2==0?(i=(h+s)/2)<e?(g=1+(g<<1),s=i):(g=0+(g<<1),h=i):(i=(f+c)/2)<r?(g=1+(g<<1),c=i):(g=0+(g<<1),f=i),l+=1,5===(a+=1)){var v=b[g];d.push(v),g=a=0}return d.join("")},B=function(r,e,t){t=t||52;for(var n,o=0,u=90,i=-90,d=180,a=-180,l=0;o<t;)l*=2,o%2==0?(n=(d+a)/2)<e?(l+=1,a=n):d=n:(n=(u+i)/2)<r?(l+=1,i=n):u=n,o+=1;return l},E=function(r){for(var e,t=!0,n=90,o=-90,u=180,i=-180,d=0,a=0,l=r.length;a<l;a+=1){var g=r[a].toLowerCase();d=h[g];for(var f=4;0<=f;f-=1){var c=d>>f&1;t?(e=(u+i)/2,1===c?i=e:u=e):(e=(n+o)/2,1===c?o=e:n=e),t=!t}}return[o,i,n,u]},M=function(r,e){for(var t=90,n=-90,o=180,u=-180,i=0,d=(e=e||52)/2,a=0;a<d;a+=1)i=l(r,2*(d-a)-1),0===l(r,2*(d-a)-2)?t=(t+n)/2:n=(t+n)/2,0===i?o=(o+u)/2:u=(o+u)/2;return[n,u,t,o]},S=function(r){var e=E(r),t=(e[0]+e[2])/2,n=(e[1]+e[3])/2;return{latitude:t,longitude:n,error:{latitude:e[2]-t,longitude:e[3]-n}}},_=function(r,e){var t=M(r,e),n=(t[0]+t[2])/2,o=(t[1]+t[3])/2;return{latitude:n,longitude:o,error:{latitude:t[2]-n,longitude:t[3]-o}}},w=function(r,e){var t=S(r),n=t.latitude+e[0]*t.error.latitude*2,o=t.longitude+e[1]*t.error.longitude*2;return x(n,o,r.length)},y=function(r,e,t){var n=_(r,t=t||52),o=n.latitude+e[0]*n.error.latitude*2,u=n.longitude+e[1]*n.error.longitude*2;return B(o,u,t)},n=function(r){var t=r.length,e=S(r),n=e.latitude,o=e.longitude,u=2*e.error.latitude,i=2*e.error.longitude,d=function(r,e){return x(n+r*u,o+e*i,t)};return[d(1,0),d(1,1),d(0,1),d(-1,1),d(-1,0),d(-1,-1),d(0,-1),d(1,-1)]},o=function(r,t){var e=_(r,t=t||52),n=e.latitude,o=e.longitude,u=2*e.error.latitude,i=2*e.error.longitude,d=function(r,e){return B(n+r*u,o+e*i,t)};return[d(1,0),d(1,1),d(0,1),d(-1,1),d(-1,0),d(-1,-1),d(0,-1),d(1,-1)]},u=function(r,e,t,n,o){for(var u=x(r,e,o=o||9),i=x(t,n,o),d=S(u),a=2*d.error.latitude,l=2*d.error.longitude,g=E(u),f=E(i),c=Math.round((f[0]-g[0])/a),h=Math.round((f[1]-g[1])/l),s=[],v=0;v<=c;v+=1)for(var b=0;b<=h;b+=1)s.push(w(u,[v,b]));return s},i=function(r,e,t,n,o){for(var u=B(r,e,o=o||52),i=B(t,n,o),d=_(u,o),a=2*d.error.latitude,l=2*d.error.longitude,g=M(u,o),f=M(i,o),c=Math.round((f[0]-g[0])/a),h=Math.round((f[1]-g[1])/l),s=[],v=0;v<=c;v+=1)for(var b=0;b<=h;b+=1)s.push(y(u,[v,b],o));return s},d={getBit:l,getKeyLength:t,encode:x,encodeInt:B,decodeBbox:E,decodeBboxInt:M,decode:S,decodeInt:_,neighbor:w,neighborInt:y,neighbors:n,neighborsInt:o,bboxes:u,bboxesInt:i};return r.BASE32_CODES=b,r.BASE32_CODES_DICT=h,r.ENCODE_AUTO=I,r.SIGFIG_HASH_LENGTH=p,r.getBit=l,r.getKeyLength=t,r.encode=x,r.encodeInt=B,r.decodeBbox=E,r.decodeBboxInt=M,r.decode=S,r.decodeInt=_,r.neighbor=w,r.neighborInt=y,r.neighbors=n,r.neighborsInt=o,r.bboxes=u,r.bboxesInt=i,r.default=d,r}({});
